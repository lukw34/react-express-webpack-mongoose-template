language: node_js
sudo: required
node_js:
- '8'
before_install:
- yarn
cache:
  yarn: true
  directories:
  - node_modules
jobs:
  include:
  - stage: eslint
    name: Code quality check
    script: yarn eslint
  - stage: tests
    name: Test client-side code
    script: yarn test:client
  - stage: tests
    name: Test server-side code
    script: yarn test:server
deploy:
  provider: heroku
  api_key: $HEROKU_API_KEY
  app:
    develop: rewt-staging
    master: rewt-production