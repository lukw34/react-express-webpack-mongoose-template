language: node_js
sudo: required
node_js:
- '8'
before_install:
- yarn
cache:
  yarn: true
  directories:
  - node_modules
jobs:
  include:
  - stage: eslint
    name: Code quality check
    script: yarn eslint
  - stage: test-client
    name: Test client-side code
    script: yarn test:client
  - stage: test-server
    name: Test server-side code
    script: yarn test:server
deploy:
  provider: heroku
  api_key:
    secure: GjLPjQEa6WSXmdkA5wt/y5IqQqjkw3FNyoHTHTxe7xCG5tVXYqU41c5R6xTUQK1ZLpf2lNQNt2gekNWdThugBXnvPlLwVDpLP5USyd9LtfmgSw8AD5+wR+yEQhv5qltA6cc2oUhdfGCCyDdQFoLCcNhMYF4ZbWlBE8en8/AfXK/3r6oDg0tcvGxpgwkEsJNFNMsyZKmLWVBUWjli2ovv7ij3C+YjtudexRWThXYgue46/n3zNBBZDmhi+vn0FQ34CThl8+2Eluh7l6qCg2W6X1k+N3UfcUlVhJtOZN/ySBeeTVIwvDEksaW2JRjLIqdBo5mDvztMGftr2PHQsPD0bPky00hSo6ZCGdRvLk92ck/OlcN8mvctMGxWpLOH7Df9pfNNCT8C9F5sAvB9eGAKiDY4d4VnLgwEpdOlIo5so3TB3P+ylrnX4MW1EdZn1lRqHBRzwjHexN2cogdi6gR6ZJwhqMiUqIRP/E9pwkln164sgycX1UZ94vGKblz3p3Kl55rorhomub/N3ufyLJ0jP+HNtYThiaax6a7ELWMoEwURq2LT3gmTBtnhutfZDMVn1peFa2AIS2+J3fW3iRokE9k4fVFHYb7M1L52lVz9KJmfI/5lr3KDHNFfNzccmKFGH3k9IF3O/qd8rO0QnEgaGAfgJKT9EUIX1KQ8ee4D+tw=
  app:
    develop: rewt-staging
    master: rewt-production
  on:
    repo: lukw34/react-express-webpack-template
